<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head>
        <title th:text="${category.name}">Category name</title>
    </head>
    <body>

        <div th:include="fragments/navbar_template :: navbar"></div>
        <div th:include="fragments/scripts :: confirmScript"></div>
        <div th:include="fragments/messages_template :: messages"></div>

        <ul sec:authorize="hasRole('ROLE_ADMIN')">
            <li id="sql-li">
                <form th:method="DELETE" th:action="@{/categories/{id} (id=${category.id})}">
                    <input id="sql-input" type="submit" value="delete" Onclick="return Confirm();"></input>
                </form>
            </li>

            <li id="sql-li">
                <form th:method="GET" th:action="@{/categories/{id}/edit (id=${category.id})}">
                    <input id="sql-input" type="submit" value="edit" Onclick="return Confirm();"></input>
                </form>
            </li>
        </ul>

        <div class="get-in-touch">
            <div class="get-in-touch-text-boxs">
                <h2 th:text="${category.name}">Category name</h2>
                <p th:text="${category.description}">Description</p>
            </div>
        </div>

        <div class="get-in-touch" th:if="${category.taskList}">
            <h3>Task list</h3>
            <div th:each="task : ${taskList}">
                <h4><a th:text="${task.name}" th:href="@{/categories/{id}/tasks/{taskId} (id=${category.id}, taskId=${task.id})}">Task name</a></h4>
                <div sec:authorize="hasRole('ROLE_TEACHER')">
                    <form th:method="POST" th:action="@{/categories/{id} (id = ${category.id})}">
                        <input id="taskId" name="taskId" type="hidden" th:value="${task.id}"></input>
                        <input type="submit" th:value="'Switch ' + ${task.name} + ' with next task'"></input>
                    </form>    
                </div>
            </div>
        </div>

        <a th:href="@{/categories}">Back to category listing</a>

        <div th:include="fragments/footer_template :: footer"></div>
        <div th:include="fragments/twitterBootstrap :: twitterBootstrap"></div>
    </body>
</html>