<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>SQL-tasker</title>
</head>
<body>
<div th:include="fragments/navbar_template :: navbar"></div>

<div th:include="fragments/messages_template :: messages"></div>

<h2>Welcome to SQL-tasker!</h2>

<div sec:authorize="hasRole('STUDENT')">
    <h2><a th:href="@{/tasks}">To task listing</a></h2>
    <h2><a th:href="@{/databases}">To database listing</a></h2>
</div>

<div th:if="${submissions}">
    <table class="table">
        <thead>
            <tr>
                <th>User</th>
                <th>Task</th>
                <th>Category</th>
                <th>Course</th>
                <th>Query</th>
                <th>Points</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="submission : ${submissions}">
                <td th:text="${submission.account.username}">Username</td>
                <td th:text="((${submission.task != null}) ? ${submission.task.name} : '')">Task name</td>
                <td th:text="((${submission.category != null}) ? ${submission.category.name} : '')">Category name</td>
                <td th:text="((${submission.course != null}) ? ${submission.course.name} : '')">Course name</td>
                <td th:text="${submission.query}">Query</td>
                <td th:text="${submission.points}">Points</td>
            </tr>
        </tbody>
    </table>
</div>

<div th:if="${feedback}">
    <table class="table">
        <thead>
            <tr>
                <td>Task</td>
                <td>Difficulty</td>
                <td>Educational</td>
                <td>Effort</td>
            </tr>
        </thead>
        <tbody>
            <tr th:each="fb : ${feedback}">
                <td><p th:if="${fb.task}" th:text="${fb.task.name}"></p></td>
                <td th:text="${fb.difficulty}"></td>
                <td th:text="${fb.educational}"></td>
                <td th:text="${fb.effort}"></td>
            </tr>
        </tbody>
    </table>
</div>

<div th:include="fragments/footer_template :: footer"></div>
<div th:include="fragments/twitterBootstrap :: twitterBootstrap"></div>
</body>
</html>
